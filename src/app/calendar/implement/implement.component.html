<!-- <div class="main-content"> -->
<div class="" style="margin-top: -45px;">
  <div class="card-body nav-hor-tabs" style="margin-top: -20px">
    <div class="nav-tabs-navigation">
      <div class="nav-tabs-wrapper">
        <ul id="tabs" class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link nav-colors active" data-toggle="tab" href="#intray" role="tab" aria-expanded="true">
              Things To Do In Tray</a>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-colors" data-toggle="tab" href="#weekly" role="tab" aria-expanded="true">
              Weekly Calendar</a>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-colors" data-toggle="tab" href="#diary" role="tab"
              aria-expanded="false">Daily Diary</a> <!--  (click)="initDiary()" -->
          </li>
        </ul>
      </div>
    </div>
    <div id="my-tab-content" class="tab-content text-center">
      <div class="tab-pane active" id="intray" role="tabpanel" aria-expanded="true">
        <div class="row">
          <div class="col-md-6 ml-auto mr-auto">
            <div class="card" style="height: 495px;">
              <div class="card-body text-center" style="padding-top:0px">
                <div class="card-category clrs-h4-font text-left">
                  <p class="pull-left clrs-h1-font">Things To Do In Tray</p>
                  <p class="category pull-left" style="margin-top:-1em">
                    Click on a Task to add it to your Weekly To Do list<br>
                  </p>
                </div>
              </div>
              <div class="card-body text-center" style="padding-top:0px">
                <div class="card-body" style="padding-left: 0px;padding-right: 0px;padding-top: 0px;">
                  <div id="accordionTsk" role="tablist" aria-multiselectable="true" class="card-collapse">
                    <div class="card card-plain">
                      <div class="card-header text-left" role="tab" id="headingOutstanding" style="padding-top: 0px;">
                        <a data-toggle="collapse" href="#OutstandingTray" aria-expanded="true" aria-controls="OutstandingTray" title="Click to see Tasks in your In Tray"> <!--  (click)="dataCALL()" -->
                          Outstanding Tasks
                          <i class="nc-icon nc-minimal-down"></i>
                        </a>
                      </div>
                      <div id="OutstandingTray" class="collapse show" role="tabpanel" aria-labelledby="headingOutstanding" data-parent="#accordionTsk">
                        <div class="card-body" style="padding-left: 0px;padding-right: 0px;">
                          <div class="content container scroll-task" style="padding-left: 0px;">
                            <ol *ngFor="let tss of OutstandingTasks"> 
                              <li *ngIf="tss.complete !== true"  style="list-style-type:none;color:steelblue">
                                <!-- <div class="row"> -->
                                  <div class="col-sm-12 text-left" style="margin-right:-.5em">
                                    <button class="dropdown-toggle btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color:slategrey;padding-left: 0px;padding-bottom: 0px">
                                    <!-- <span  [ngClass]="{'text-success' : tss.selectedWeekly == true}">{{ tss.name }} </span> -->
                                    <!-- <span  [ngClass]="{'text-success , strikethrough' : tss.selectedWeekly == true}">{{ tss.name }} </span> -->
                                      <span  [ngClass]="{'strikethrough' : tss.selectedWeekly == true}"> {{ tss.name }} </span>
                                      <span class="label text-warning" style="padding-left : 1em"> <small> {{ tss.when }} </small></span>
                                    </button><br>
                                    <span name="taskDetails">
                                      <span *ngIf="tss.companyName !==''" class="category text-info"> {{ tss.companyName }}</span>
                                      <span *ngIf="tss.projectName !==''" class="category text-warning">; {{ tss.projectName }}</span>
                                      <span class="category text-left text-yellow" *ngIf="tss.companyName === '' && tss.projectName === ''"> {{ tss.classification.name }}</span>
                                      <span class="text-left" *ngIf="tss.companyName !== '' || tss.projectName !== ''">.</span>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                      <button  *ngIf="tss.selectedWeekly == true; else wTkSelect" disabled class="dropdown-item primary btn-link" rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal" data-target="#dptModal"
                                      title="Add {{ tss.name }} to a week`s tasks">
                                        Add to my Week's tasks
                                      </button>
                                      <ng-template #wTkSelect>
                                        <button class="dropdown-item primary btn-link" rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal" data-target="#dptModal"
                                        title="Add {{ tss.name }} to a week`s tasks">
                                          Add to my Week's tasks
                                        </button> 
                                      </ng-template>
                                    </div>
                                  </div>
                                <!-- </div> -->
                              </li>
                            </ol>
                            <p *ngIf="OutstandingTasks.length == 0">No Outstanding Tasks</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card card-plain">
                      <div class="card-header text-left" role="tab" id="headingCurrent">
                        <a class="collapsed" data-toggle="collapse" href="#currentTskTray" aria-expanded="false" aria-controls="currentTskTray" title="Click to see Tasks in your In Tray">
                          Current Tasks
                          <i class="nc-icon nc-minimal-down"></i>
                        </a>
                      </div>
                      <div id="currentTskTray" class="collapse" aria-labelledby="headingCurrent" data-parent="#accordionTsk">
                        <div class="card-body" style="padding-left: 0px;padding-right: 0px;">
                          <div class="content container scroll-task" style="padding-left: 0px;">
                            <ol *ngFor="let tss of CurrentTAsks">
                              <li *ngIf="tss.complete !== true" class="" style="list-style-type:none;color:steelblue" >
                                <!-- <div class="row"> -->
                                  <div class="col-sm-12 text-left" style="margin-right:-.5em">
                                    <button class="dropdown-toggle btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color:slategrey;padding-left: 0px;padding-bottom: 0px">
                                      <!-- <span [ngClass]="{'text-success' : tss.selectedWeekly == true}"> {{ tss.name }} </span> -->
                                      <span [ngClass]="{'strikethrough' : tss.selectedWeekly == true}"> {{ tss.name }} </span>
                                      <span class="label text-warning" style="padding-left : 1em"> <small> {{ tss.when }} </small></span>
                                    </button><br>
                                    <span name="taskDetails">
                                      <span *ngIf="tss.companyName !==''" class="category text-info"> {{ tss.companyName }}</span>
                                      <span *ngIf="tss.projectName !==''" class="category text-warning">; {{ tss.projectName }}</span>
                                      <span class="category text-left text-yellow" *ngIf="tss.companyName === '' && tss.projectName === ''"> {{ tss.classification.name }}</span>
                                      <span class="text-left" *ngIf="tss.companyName !== '' || tss.projectName !== ''">.</span>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                      <button *ngIf="tss.selectedWeekly == true; else wTkSelect" disabled class="dropdown-item primary btn-link" rel="tooltip"
                                        (click)="add2WeeklyPlan(tss)" data-toggle="modal" data-target="#dptModal"
                                        title="Add {{ tss.name }} to a week`s tasks">
                                        Add to my Week's tasks
                                      </button>
                                      <ng-template #wTkSelect>
                                        <button class="dropdown-item primary btn-link" rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal"
                                          data-target="#dptModal" title="Add {{ tss.name }} to a week`s tasks">
                                          Add to my Week's tasks
                                        </button>
                                      </ng-template>
                                    </div>
                                  </div>
                                <!-- </div> -->
                              </li>
                            </ol>
                            <p *ngIf="CurrentTAsks.length == 0">No Current Tasks</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card card-plain">
                      <div class="card-header text-left" role="tab" id="headingUpcoming">
                        <a class="collapsed" data-toggle="collapse" href="#upcoming" aria-expanded="false" aria-controls="upcoming" title="Click to see Tasks in your In Tray">
                          Upcoming Tasks
                          <i class="nc-icon nc-minimal-down"></i>
                        </a>
                      </div>
                      <div id="upcoming" class="collapse" aria-labelledby="headingUpcoming" data-parent="#accordionTsk">
                        <div class="card-body" style="padding-left: 0px;padding-right: 0px;">
                          <div class="content container scroll-task" style="padding-left: 0px;">
                            <!-- Short Term Tasks<br> -->
                          <div class="card-header text-left"> Short Term Tasks</div><br>
                            <ol *ngFor="let tss of ShortTermTAsks">
                              <li class="" *ngIf="tss.complete !== true"  style="list-style-type:none;color:steelblue" >
                                <!-- <div class="row"> -->
                                  <div class="col-sm-12 text-left" style="margin-right:-.5em">
                                    <button class="dropdown-toggle btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                      aria-expanded="false" style="color:slategrey;padding-left: 0px;padding-bottom: 0px">
                                      <span [ngClass]="{'strikethrough' : tss.selectedWeekly == true}"> {{ tss.name }} </span>
                                      <span class="label text-warning" style="padding-left : 1em"> <small> {{ tss.when }} </small></span>
                                    </button><br>
                                    <span name="taskDetails">
                                      <span *ngIf="tss.companyName !==''" class="category text-info"> {{ tss.companyName }}</span>
                                      <span *ngIf="tss.projectName !==''" class="category text-warning">; {{ tss.projectName }}</span>
                                      <span class="category text-left text-yellow" *ngIf="tss.companyName === '' && tss.projectName === ''"> {{ tss.classification.name }}</span>
                                      <span class="text-left" *ngIf="tss.companyName !== '' || tss.projectName !== ''">.</span>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                      <button *ngIf="tss.selectedWeekly == true; else wTkSelect" disabled class="dropdown-item primary btn-link" rel="tooltip"
                                        (click)="add2WeeklyPlan(tss)" data-toggle="modal" data-target="#dptModal"
                                        title="Add {{ tss.name }} to a week`s tasks">
                                        Add to my Week's tasks
                                      </button>
                                      <ng-template #wTkSelect>
                                        <button class="dropdown-item primary btn-link" rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal"
                                          data-target="#dptModal" title="Add {{ tss.name }} to a week`s tasks">
                                          Add to my Week's tasks
                                        </button>
                                      </ng-template>
                                    </div>
                                  </div>
                                <!-- </div> -->
                              </li>
                            </ol>
                            <!-- Medium Term Tasks<br> -->
                          <div class="card-header text-left">Medium Term Tasks</div><br>
                            <ol *ngFor="let tss of MediumTermTAsks">
                              <li *ngIf="tss.complete !== true"  class="" style="list-style-type:none;color:steelblue">
                                <!-- <div class="row"> -->
                                  <div class="col-sm-12 text-left" style="margin-right:-.5em">
                                    <button class="dropdown-toggle btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                      aria-expanded="false" style="color:slategrey;padding-left: 0px;padding-bottom: 0px">
                                      <span [ngClass]="{'strikethrough' : tss.selectedWeekly == true}"> {{ tss.name }} </span>
                                      <span class="label text-warning" style="padding-left : 1em"> <small> {{ tss.when }} </small></span>
                                    </button><br>
                                    <span name="taskDetails">
                                      <span *ngIf="tss.companyName !==''" class="category text-info"> {{ tss.companyName }}</span>
                                      <span *ngIf="tss.projectName !==''" class="category text-warning">; {{ tss.projectName }}</span>
                                      <span class="category text-left text-yellow" *ngIf="tss.companyName === '' && tss.projectName === ''"> {{ tss.classification.name }}</span>
                                      <span class="text-left" *ngIf="tss.companyName !== '' || tss.projectName !== ''">.</span>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                      <button *ngIf="tss.selectedWeekly == true; else wTkSelect" disabled class="dropdown-item primary btn-link" rel="tooltip"
                                        (click)="add2WeeklyPlan(tss)" data-toggle="modal" data-target="#dptModal"
                                        title="Add {{ tss.name }} to a week`s tasks">
                                        Add to my Week's tasks
                                      </button>
                                      <ng-template #wTkSelect>
                                        <button class="dropdown-item primary btn-link" rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal"
                                          data-target="#dptModal" title="Add {{ tss.name }} to a week`s tasks">
                                          Add to my Week's tasks
                                        </button>
                                      </ng-template>
                                    </div>
                                  </div>
                                <!-- </div> -->
                              </li>
                            </ol>
                            <!-- Long Term Tasks<br> -->
                          <div class="card-header text-left">Long Term Tasks</div><br>                          
                            <ol *ngFor="let tss of LongTermTAsks">
                              <li *ngIf="tss.complete !== true ; else trueActions" class="" style="list-style-type:none;color:steelblue">
                                <div class="col-sm-12 text-left" style="margin-right:-.5em">
                                  <button class="dropdown-toggle btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false" style="color:slategrey;padding-bottom: 0px;padding-left: 0px;">
                                    <span [ngClass]="{'strikethrough' : tss.selectedWeekly == true}"> {{ tss.name }} </span>
                                    <span class="label text-warning" style="padding-left : 1em"> <small> {{ tss.when }} </small></span>
                                  </button><br>
                                  <span name="taskDetails">
                                    <span *ngIf="tss.companyName !==''" class="category text-info"> {{ tss.companyName }}</span>
                                    <span *ngIf="tss.projectName !==''" class="category text-warning">; {{ tss.projectName }}</span>
                                    <span class="category text-left text-yellow" *ngIf="tss.companyName === '' && tss.projectName === ''"> {{ tss.classification.name }}</span>
                                    <span class="text-left" *ngIf="tss.companyName !== '' || tss.projectName !== ''">.</span>
                                  </span>
                                  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                    <button *ngIf="tss.selectedWeekly == true; else wTkSelect" disabled class="dropdown-item primary btn-link" rel="tooltip"
                                      (click)="add2WeeklyPlan(tss)" data-toggle="modal" data-target="#dptModal"
                                      title="Add {{ tss.name }} to a week`s tasks">
                                      Add to my Week's tasks
                                    </button>
                                    <ng-template #wTkSelect>
                                      <button class="dropdown-item primary btn-link" rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal"
                                        data-target="#dptModal" title="Add {{ tss.name }} to a week`s tasks">
                                        Add to my Week's tasks
                                      </button>
                                    </ng-template>
                                  </div>
                                </div>
                              </li>
                              <ng-template #trueActions>
                                <li class="" style="list-style-type:none;color:steelblue">
                                  <div class="col-sm-12 text-left" style="margin-right:-.5em">
                                    <button class="dropdown-toggle btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                      aria-expanded="false" style="color:slategrey;padding-bottom: 0px;padding-left: 0px;">
                                      <span [ngClass]="{'strikethrough' : tss.selectedWeekly == true}"> {{ tss.name }} </span>
                                      <span class="label text-warning" style="padding-left : 1em"> <small> {{ tss.when }} </small></span>
                                    </button><br>
                                    <span name="taskDetails">
                                      <span *ngIf="tss.companyName !==''" class="category text-info"> {{ tss.companyName }}</span>
                                      <span *ngIf="tss.projectName !==''" class="category text-warning">; {{ tss.projectName }}</span>
                                      <span class="category text-left text-yellow" *ngIf="tss.companyName === '' && tss.projectName === ''">
                                        {{ tss.classification.name }}</span>
                                      <span class="text-left" *ngIf="tss.companyName !== '' || tss.projectName !== ''">.</span>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                      <button *ngIf="tss.selectedWeekly == true; else wTkSelect" disabled class="dropdown-item primary btn-link"
                                        rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal" data-target="#dptModal"
                                        title="Add {{ tss.name }} to a week`s tasks">
                                        Add to my Week's tasks
                                      </button>
                                      <ng-template #wTkSelect>
                                        <button class="dropdown-item primary btn-link" rel="tooltip" (click)="add2WeeklyPlan(tss)" data-toggle="modal"
                                          data-target="#dptModal" title="Add {{ tss.name }} to a week`s tasks">
                                          Add to my Week's tasks
                                        </button>
                                      </ng-template>
                                    </div>
                                  </div>
                                </li>
                              </ng-template>
                            </ol>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 ml-auto mr-auto">
            <div class="card">
              <div class="card-body text-center" style="padding-top:0px">
                <div class="card-category clrs-h4-font text-left">
                  <p class="pull-left">My Weekly To Do List</p>
                  <p class="category pull-left" style="margin-top:-1em"> 
                    Proceed to Weekly Calendar to create sub-Tasks.
                  </p>
                </div>
              </div>
              <div class="row impl-flow col-md-12">
                <ol style="list-style-type:none;padding-left: 0px">
                  <li *ngFor="let tss of weeklyTasks | async" style="color:slategray">
                    <div *ngIf="tss.complete !== true" class="col-md-12 card-header text-left" role="tab">
                      <span class="col-md-12">
                        <a class="text-left" aria-current="false">{{ tss.name }}</a><br>
                        <span name="taskDetails" style="padding-left:1em">
                          <span *ngIf="tss.companyName !==''" class="category text-info"> {{ tss.companyName }}</span>
                          <span *ngIf="tss.projectName !==''" class="category text-warning">; {{ tss.projectName }}</span>
                          <span class="category text-left text-yellow" *ngIf="tss.companyName === '' && tss.projectName === ''"> {{ tss.classification.name }}</span>
                          <span class="text-left" *ngIf="tss.companyName !== '' || tss.projectName !== ''">.</span>
                        </span>
                      </span>
                    </div>
                  </li>
                </ol>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="weekly" role="tabpanel" aria-expanded="false">
        <div class="col-md-12 col-sm-12 ml-auto mr-auto">
          <p class="clrs-h4-font text-left" style="margin-top:-1em; color: darkslategrey">Calendar Weekly Activities.</p>
          <p class="category text-left" style="margin-top:-1em">
            These are task classification standard activities and work activities picked for this week's activities
          </p>
        </div>
        <div class="row clrs-h4-font">
          <div class="col-sm-5 text-left" style="padding-left: 29px;">Task List
          </div>
          <div class="col-sm-5" >
            <div class="row">
              <div class="col-sm-6 text-left ma-an">Details</div>
            </div>
          </div>
          <div class="col-sm-2"></div>
        </div>
        <div class="card-body impl-flow">
          <div id="accordionA" role="tablist" aria-multiselectable="true" class="card-collapse col-md-12">
            <ol style="list-style-type:none;padding-left: 0px" *ngFor="let tss of weeklyTasks | async">
              <li *ngIf="tss.complete !== true" style="color:slategray">
                <div class="row">
                  <div class="col-md-12 col-sm-10 text-left" style="padding-left: 0px;padding-right: 0px;">
                    <div class="card card-plain">
                      <div class="card-header" role="tab" id="heading2">
                        <a class="collapsed" data-toggle="collapse" href="#{{  tss.id  }}" (click)="viewMyTaskActions(tss)" title="Click on Tasks in your In Tray" aria-expanded="false" aria-current="false">
                          <!-- <div class="row"> -->
                            <span class="text-left" style="width: 20em;">{{ tss.name }}</span>
                            <span>
                              <span class="text-left text-info" *ngIf="tss.projectName !== ''">, {{ tss.projectName }}</span>
                              <span class="text-left text-warning" *ngIf="tss.companyName !== ''">, {{ tss.companyName }}</span>
                              <span *ngIf="tss.companyName === '' && tss.projectName === ''">
                                <span *ngIf="tss.classification.name !== ''" class="text-left text-yellow"> {{ tss.classification.name }}</span>
                              </span>
                            </span>
                            <i class="nc-icon nc-minimal-down"></i>
                          <!-- </div> -->
                        </a>
                      </div>
                      <div id="{{  tss.id  }}" class="collapse" data-parent="#accordionA" role="tabpanel" aria-labelledby="heading2">
                        <div class="row card-category clrs-h4-font">
                          <div class="col-sm-3 col-md-3" style="padding-left: 55px;"> <font size= 2>Sub-task</font>
                          </div>
                          <div class="col-sm-6 col-md-7">
                            <div class="row">
                              <div class="col-sm-6 text-left na-an" style="padding-left: 35px;"><font size=2>Start Date</font></div>
                              <div class="col-sm-6 text-left na-an" style="padding-left: 35px;"><font size=2>Finish Date</font></div>
                            </div>
                          </div>
                          <div class="col-sm-2"></div>
                        </div>
                        <div class="card-body">
                          <ol style="list-style-type:none;padding-left: 0px;">
                            <li *ngFor="let item of mytaskActions | async">
                              <div class="row" style="color: darkslategrey">
                                <div class="text-left">
                                  <input style="margin-top: 4px;" name="nchkStd" class="pull-right col-form-label" *ngIf="item.selectedWeekWork == true; else wNCK2" type="checkbox" checked disabled
                                    (change)="setWeekAction($event, item)">
                                  <ng-template #wNCK2>
                                    <input style="margin-top: 4px;" name="nchkStd2" class="pull-right col-form-label" type="checkbox" (change)="setWeekAction($event, item)">
                                  </ng-template>
                                </div>
                                <div class="col-sm-3 pull-left" style="padding-left: 2em">
                                  <!-- <span class="text-left" [ngClass]="{'text-success' : item.selectedWeekWork == true}" name="weekStdName" style="padding-top: 2px; padding-left: 10px; padding-right: 10px"> -->
                                  <span class="text-left" [ngClass]="{'strikethrough' : item.selectedWeekWork == true}" name="weekStdName" style="padding-top: 2px; padding-left: 10px; padding-right: 10px">
                                    <span *ngIf="item.description && item.description != ''; else itemName" class="category text-info">
                                      <font size=2>{{ item.description }}</font>
                                    </span>
                                    <ng-template #itemName><font size=2>{{ item.name }}</font></ng-template>
                                  </span>
                                </div>
                                <div class="col-sm-8">
                                  <div class="row">
                                    <div class="col-sm-5 text-left"><font size=2>{{ item.startDay }}, {{ item.startDate }}</font></div>
                                    <div class="col-sm-5 text-left"><font size=2>{{ item.endDay }}, {{ item.endDate }}</font></div>
                                    <button class="primary btn-link" (click)="selectEditAction(item)" data-toggle="modal" data-target="#editAction"
                                      style=" padding-top: 0px; padding-bottom: 0px;">
                                      Add date</button>
                                  </div>
                                </div>
                              </div>
                            </li>
                          </ol>
                        </div>
                        <!-- <button class="btn-link btn-round primary" (click)="selectTask(tss)" data-toggle="modal" data-target="#newAction">
                          <small>Add Sub-task</small>
                        </button> -->

                        <!--START -- Munashe 18/09/2019   -->

                        <button  *ngIf="tss.projectName === ''; else pSubs" class="btn-link btn-round primary" (click)="selectTask(tss)" data-toggle="modal"
                          data-target="#newAction">
                          <small> Add Sub-task</small>
                        </button>

                        <ng-template #pSubs>  
                          <small class= "text-warning">
                            To create subtasks, goto the projects page 
                            <a [routerLink]="[ '/projects/', tss.projectId ]">
                            <span class="text-info">{{ tss.projectName }}</span>
                          </a>
                        </small>
                      </ng-template>

                    <!--End --Munashe 18/09/2019 -->
                      </div>
                    </div>
                  </div>
                </div>
              </li>
            </ol>
          </div>
        </div>
        <div class="row card-category">
          <div class="col-md-12 col-sm-12">
            <p class="category">Click Add date to add or edit the start and end date for the Sub-task</p>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="diary" role="tabpanel" aria-expanded="false">
        <div class="row card-category clrs-h4-font">
          <div class="col-sm-3 text-left" style="padding-left: 40px;">
            <a class="clrs-h1-font text-left">Daily Diary</a>
          </div>
          <div class="col-sm-2"></div>
          <div class="col-sm-2"><a class="btn btn-primary btn-link a-mycol" (click)="changeDay('previous')">Previous</a></div>
          <div class="col-sm-3 clrs-h4-font text-info">{{ workWeekDay }}, {{ workDay }}</div>
          <div class="col-sm-2"><a class="btn btn-primary btn-link a-mycol" (click)="changeDay('next')">Next</a></div>
        </div>
        <div class="row">
          <div class="col-sm-4 card-header text-left" style="padding-left: 40px;padding-top: 0px;"></div>
          <div class="col-sm-2 card-header text-left" style="padding-left: 1em; padding-right: 0px;padding-top: 0px;"><b>Target Qty</b></div>
          <div class="col-sm-2 card-header text-left" style="padding-left: 0px; padding-right: 0px;padding-top: 0px;"><b>Start time</b></div>
          <div class="col-sm-2 card-header text-left" style="padding-left: 12px; padding-right: 0px;padding-top: 0px;"><b>Finish time</b></div>
          <div class="col-sm-2 card-header text-left"></div>
        </div>
        <div *ngIf="viewDayActions.length !== 0; else showProcessing" class="card-body impl-flow">
          <ng-container>
            <div class="col-sm-12">
              <ul style="list-style-type:none;padding-left: 10px;">
                <li *ngFor="let item of stdArray">
                  <div class="row">
                    <div class="text-left">
                      <input style="margin-top: 4px;" class="pull-right col-form-label" *ngIf=" item.selectedWork == true; else UCK" type="checkbox" checked (change)="setDiary($event, item)">
                      <ng-template #UCK>
                        <input style="margin-top: 4px;" class="pull-right col-form-label" type="checkbox" (change)="setDiary($event, item)">
                      </ng-template>
                    </div>
                    <div class="col-sm-4 text-left">
                      <span class="text-left" [ngClass]="{'text-success' : item.selectedWork == true}" style="padding-top: 2px; padding-left: 10px; padding-right: 10px">
                        <font size=2>{{ item.name }}</font>
                      </span>
                    </div>
                    <div class="row col-md-8 col-sm-8">
                      <div class="col-md-3 col-sm-3" style="padding-left: 5px; padding-right:5px">
                        <div class="form-group">
                          <div class="input-group" [ngClass]="{'input-group-focus':focus===true}">
                            <input type="text" class="form-control panel-boader" [(ngModel)]="item.targetQty" style=" padding-left: 10px; padding-right: 10px; height:2em"
                              placeholder="Enter" rel="tooltip" title="Click and enter todays'arget quantity"/>
                            <div class="input-group-postpend">
                              <span class="input-group-text" style=" padding-left: 10px; padding-right: 10px; height:28px">
                                <small>{{ item.unit }}</small>
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-3 col-sm-2" style="padding-left: 5px; padding-right:5px">
                        <div class="form-group">
                          <input type="time" class="form-control panel-boader timepicker" [(ngModel)]="item.start" style=" padding-left: 10px; padding-right: 10px; height:2em"
                            rel="tooltip" title="Click, enter start time" placeholder="Time from" />
                        </div>
                      </div>
                      <div class="col-md-3 col-sm-2" style="padding-left: 5px; padding-right:5px">
                        <div class="form-group">
                          <input type="time" class="form-control panel-boader timepicker" [(ngModel)]="item.end" style=" padding-left: 10px; padding-right: 10px;  height:2em"
                            rel="tooltip" title="Click, enter end time" placeholder="Time to" /> 
                        </div>
                      </div>
                      <!-- <div class="col-md-3 col-sm-3" style="padding-left: 5px; padding-right:5px">
                        <div class="btn-group btn-group-toggle">
                          <button class="form-control panel-boader clrs-cell btn-link" style="padding-top: 2px; padding-left: 10px; padding-right: 10px; height:2em"
                              rel="tooltip" title="Click to  update the activity" (click)="addClassActionTime(item)"><small>Save</small></button>
                        </div>
                      </div> -->
                      <div class="dropdown">
                        <a href=""   style="padding-top: 2px; padding-left: 10px; padding-right: 0px; height:2em;margin-top: 2px;margin-bottom: 2px;" class=" text-primary btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                          <span style="vertical-align: super;"> <font size=5>...</font></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                          <!-- <div class="dropdown-header">Dropdown header</div> -->
                          <a class="dropdown-item form-control panel-boader clrs-cell btn-link" rel="tooltip" title="Click to update the activity"
                          style="padding-top: 2px; padding-left: 10px; padding-right: 10px; height:2em"
                          (click)="addClassActionTime(item)"><small>Save</small> <i style="margin-top: 6px;" class=" pull-right fa fa-save"></i></a>
                          <a class="dropdown-item form-control panel-boader clrs-cell btn-link" 
                          style="padding-top: 2px; padding-left: 10px; padding-right: 10px; height:2em" rel="tooltip"
                          title="Click to Edit" data-toggle="modal" data-target="#actionEdit"><small>Edit</small> <i style="margin-top: 6px;"  class=" pull-right fa fa-edit"></i></a>
                          <!-- <a class="dropdown-item" href="#">Another action</a>
                          <a class="dropdown-item" href="#">Something else</a> -->
                        </div>
                      </div>

                    </div>
                  </div>
                </li>
                <li *ngFor="let item of viewDayActions">
                  <div class="row">
                    <div class="text-left">
                      <input style="margin-top: 4px;" name="nchk" class="pull-right col-form-label" *ngIf="item.selectedWork == true; else NCK" type="checkbox" checked (change)="setDiaryAction($event, item)">
                      <ng-template #NCK>
                        <input style="margin-top: 4px;" name="nchk2" class="pull-right col-form-label" type="checkbox" (change)="setDiaryAction($event, item)">
                      </ng-template>
                    </div>
                    <ng-container *ngIf="item.description; else subzname">
                      <div *ngIf="item.description !==''" class="col-sm-4 text-left"> <!-- *ngIf="item.description !==''" -->
                        <span *ngIf="item.projectName !==''; else showSpanDay" [ngClass]="{'text-success' : item.selectedWork == true}" title="Enterprise:{{ item.companyName }}. Project:{{ item.projectName }}">
                          <span class="category text-info">{{ item.description }},
                            <span class="text-yellow" *ngIf="item.taskName !== ''"> {{ item.taskName }},</span><!-- <br> -->
                            <span class="" style="color: grey;"> {{ item.projectName }}, {{ item.companyName }}</span>
                          </span>
                        </span>
                        <ng-template #showSpanDay>
                          <span *ngIf="item.companyName !== ''; else showSpanD2" [ngClass]="{'text-success' : item.selectedWork == true}" title="Enterprise:{{ item.companyName.name }}. Department:{{ item.department }}">
                            <span class="category text-info">{{ item.description }},
                              <span class="text-yellow" *ngIf="item.taskName !==''"> {{ item.taskName }},</span><!-- <br> -->
                              <span class="" style="color: grey;"> {{ item.companyName }},</span>
                              </span>
                          </span>
                          <ng-template #showSpanD2>
                            <span *ngIf="item.champion !== null || item.champion !== undefined"> <!--  title="Champion:{{ item.champion?.name }}" -->
                              <span class="category text-info">{{ item.description }},
                                <span class="text-yellow " *ngIf="item.taskName !==''; else showSpan3"> {{ item.taskName }},</span><!-- <br> -->
                                <span *ngIf="item.classification !== null">
                                  <span *ngIf="item.classification.name !== ''" style="color: grey;"> {{ item.classification.name }}</span>
                                </span>
                              </span>
                              <ng-template #showSpan3>
                                <span *ngIf="item.classification !== null ; else showSpan4" >
                                  <span *ngIf="item.classification.name !== null || item.classification.name !== ''">
                                    <span *ngIf="item.classification.name !== ''" style="color: grey;"> {{ item.classification.name }},</span>
                                  </span>
                                  <span class="text-danger">{{ item.type }}</span>
                                </span>
                                <ng-template #showSpan4>
                                  <!-- <span class="category text-yellow">{{ item.description }},</span><br> -->
                                  <span class="text-danger">{{ item.type }}</span>
                                </ng-template>
                              </ng-template>
                            </span>
                          </ng-template>
                        </ng-template>
                      </div>
                    </ng-container>
                    <ng-template #subzname>
                      <div *ngIf="item.name !==''" class="col-sm-4 text-left"> <!-- *ngIf="item.name !==''" -->
                        <span *ngIf="item.projectName !==''; else showSpanDay" [ngClass]="{'text-success' : item.selectedWork == true}" title="Enterprise:{{ item.companyName }}. Project:{{ item.projectName }}">
                          <span class="category text-info">{{ item.name }},
                            <span class="text-yellow" *ngIf="item.taskName !== ''"> {{ item.taskName }},</span><!-- <br> -->
                            <span class="" style="color: grey;"> {{ item.projectName }}, {{ item.companyName }}</span>
                          </span>
                        </span>
                        <ng-template #showSpanDay>
                          <span *ngIf="item.companyName !== ''; else showSpanD2" [ngClass]="{'text-success' : item.selectedWork == true}" title="Enterprise:{{ item.companyName.name }}. Department:{{ item.department }}">
                            <span class="category text-info">{{ item.name }},
                              <span class="text-yellow" *ngIf="item.taskName !==''"> {{ item.taskName }},</span><!-- <br> -->
                              <span class="" style="color: grey;"> {{ item.companyName }},</span>
                              </span>
                          </span>
                          <ng-template #showSpanD2>
                            <span *ngIf="item.champion !== null || item.champion !== undefined"> <!--  title="Champion:{{ item.champion?.name }}" -->
                              <span class="category text-info">{{ item.name }},
                                <span class="text-yellow " *ngIf="item.taskName !==''; else showSpan3"> {{ item.taskName }},</span><!-- <br> -->
                                <span *ngIf="item.classification !== null">
                                  <span *ngIf="item.classification.name !== ''" style="color: grey;"> {{ item.classification.name }}</span>
                                </span>
                              </span>
                              <ng-template #showSpan3>
                                <span *ngIf="item.classification !== null ; else showSpan4" >
                                  <span *ngIf="item.classification.name !== null || item.classification.name !== ''">
                                    <span *ngIf="item.classification.name !== ''" style="color: grey;"> {{ item.classification.name }},</span>
                                  </span>
                                  <span class="text-danger">{{ item.type }}</span>
                                </span>
                                <ng-template #showSpan4>
                                  <!-- <span class="category text-info">{{ item.name }},</span><br> -->
                                  <span class="text-danger">{{ item.type }}</span>
                                </ng-template>
                              </ng-template>
                            </span>
                          </ng-template>
                        </ng-template>
                      </div>
                    </ng-template>
                    <!-- <div *ngIf="item.name !==''" class="col-sm-4 text-left">
                      <span *ngIf="item.projectName !==''; else showSpanDay" [ngClass]="{'text-success' : item.selectedWork == true}" title="Enterprise:{{ item.companyName }}. Project:{{ item.projectName }}">
                        <span class="category text-yellow">{{ item.name }},
                          <span class="text-info" *ngIf="item.taskName !== ''"> {{ item.taskName }},</span>
                          <span class="" style="color: grey;"> {{ item.projectName }}, {{ item.companyName }}</span>
                        </span>
                      </span>
                      <ng-template #showSpanDay>
                        <span *ngIf="item.companyName !== ''; else showSpanD2" [ngClass]="{'text-success' : item.selectedWork == true}" title="Enterprise:{{ item.companyName.name }}. Department:{{ item.department }}">
                          <span class="category text-yellow">{{ item.name }},
                            <span class="text-info" *ngIf="item.taskName !==''"> {{ item.taskName }},</span>
                            <span class="" style="color: grey;"> {{ item.companyName }},</span>
                            </span>
                        </span>
                        <ng-template #showSpanD2>
                          <span *ngIf="item.champion !== null || item.champion !== undefined">
                            <span class="category text-yellow">{{ item.name }},
                              <span class="text-info " *ngIf="item.taskName !==''; else showSpan3"> {{ item.taskName }},</span>
                              <span *ngIf="item.classification !== null">
                                <span *ngIf="item.classification.name !== ''" style="color: grey;"> {{ item.classification.name }}</span>
                              </span>
                            </span>
                            <ng-template #showSpan3>
                              <span *ngIf="item.classification !== null ; else showSpan4" >
                                <span *ngIf="item.classification.name !== null || item.classification.name !== ''">
                                  <span *ngIf="item.classification.name !== ''" style="color: grey;"> {{ item.classification.name }},</span>
                                </span>
                                <span class="text-danger">{{ item.type }}</span>
                              </span>
                              <ng-template #showSpan4>
                                <span class="text-danger">{{ item.type }}</span>
                              </ng-template>
                            </ng-template>
                          </span>
                        </ng-template>
                      </ng-template>
                    </div> -->
                    <div class="row col-md-8 col-sm-8">
                      <div class="col-m-d-3 col-sm-3" style="padding-left: 5px; padding-right:5px">
                        <div class="input-group" [ngClass]="{'input-group-focus':focus===true}">
                          <input type="text" class="form-control panel-boader" [(ngModel)]="item.targetQty"
                            style=" padding-left: 10px; padding-right: 10px; height:2em" placeholder="Enter" />
                          <div class="input-group-postpend">
                            <span class="input-group-text" style=" padding-left: 10px; padding-right: 10px; height:28px">
                              <small>{{ item.unit }}</small>
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-3 col-sm-2" style="padding-left: 5px; padding-right:5px">
                        <div class="form-group">
                          <input type="time" class="form-control panel-boader timepicker" [(ngModel)]="item.start"
                            style=" padding-left: 10px; padding-right: 10px; height:2em" placeholder="Time from" />
                        </div>
                      </div>
                      <div class="col-md-3 col-sm-2" style="padding-left: 5px; padding-right:5px">
                        <div class="form-group">
                          <input type="time" class="form-control panel-boader timepicker" [(ngModel)]="item.end"
                            style=" padding-left: 10px; padding-right: 10px;  height:2em" placeholder="Time to" />
                        </div>
                      </div>
                      <div class="dropdown">
                        <a href=""   style="padding-top: 2px; padding-left: 10px; padding-right: 0px; height:2em;margin-top: 2px;margin-bottom: 2px;" class=" text-primary btn-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                          <span style="vertical-align: super;"> <font size=5>...</font></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                          <!-- <div class="dropdown-header">Dropdown header</div> -->
                          <a class="dropdown-item form-control panel-boader clrs-cell btn-link" rel="tooltip" title="Click to update the activity"
                            style="padding-top: 2px; padding-left: 10px; padding-right: 10px; height:2em"  (click)="addActionTime(item)">
                          <small>Save</small> <i style="margin-top: 6px;" class=" pull-right fa fa-save"></i></a>
                          <a class="dropdown-item form-control panel-boader clrs-cell btn-link" (click)="actSet(item)"
                            style="padding-top: 2px; padding-left: 10px; padding-right: 10px; height:2em" rel="tooltip" title="Click to Edit" data-toggle="modal" data-target="#actionEdit">
                          <small>Edit</small><i style="margin-top: 6px;" class=" pull-right fa fa-edit"></i></a>
                          <a (click)="setAction(item)"  class="dropdown-item form-control panel-boader clrs-cell btn-link"
                            style="padding-top: 2px; padding-left: 10px; padding-right: 10px; height:2em" rel="tooltip"
                          title="Click to confirm complete" data-toggle="modal" data-target="#actionClosure"><small>Complete</small><i style="margin-top: 6px;"  class=" pull-right fa fa-check-square-o"></i></a>
                          <!-- <a class="dropdown-item" href="#">Another action</a>
                          <a class="dropdown-item" href="#">Something else</a> -->
                        </div>
                      </div>
                      
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </ng-container>
          <ng-container *ngIf="viewDayActions.length === 0">
            <h4 class="clrs-h4-font">
              You have no activity planned Today
            </h4>
          </ng-container>
        </div>
        <ng-template #showProcessing>
          <div class="spacer" style="height:3em"></div>
          <div class="body center" style="height: 512px">
            <i class="fa fa-spinner fa-spin fa-4x fa-fw"></i>
            <p>Processing.....</p>
          </div>
        </ng-template>
        <div class="card-footer">
          <div class="row">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- </div> -->
<div class="modal fade modal-primary" id="editUnits" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog"><!--  modal-sm -->
    <div class="modal-content">
      <div class="modal-header justify-content-center">
        <div class="modal-profile ml-auto mr-auto">
          <i class="nc-icon nc-bulb-63"></i>
        </div>
      </div>
      <div class="modal-body">
        <p class="text-center">Edit Units for {{ selectEditWorkItem.name }}</p>
        <div class="row">
          <label class="col-md-4 col-form-label">Select Unit</label>
          <div class="col-md-7">
            <div class="form-group">
              <!-- <ng-select [items]="SIunits" bindLabel="name" name="jyu" placeholder="Select unit of Measure" [(ngModel)]="selectEditWorkItem.unit"></ng-select> -->
              <ng-select [items]="SIunits" bindLabel="name" id="sui1" name="jyu" placeholder="Select unit of Measure" [(ngModel)]="setSui">
              </ng-select>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="left-side">
          <button type="button" class="btn btn-link btn-link" data-dismiss="modal">Back</button>
        </div>
        <div class="divider"></div>
        <div class="right-side">
          <button type="button" class="btn btn-link btn-link" (click)="addUnit()" data-dismiss="modal">Save</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="newAction" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="card-body ">
        <div class="card-header text-center">
          <h4 *ngIf="selectedTask?.name" class="clrs-h4-font" style="margin-top: 0px;">
            <span class="">Create a new sub-task for
              <span style="border-bottom-style: ridge;">&nbsp;{{ selectedTask.name }}&nbsp;</span>
            </span>
          </h4>
        </div>
        <hr>
        <form class="form-horizontal">
          <div class="col-md-11 ml-auto mr-auto">
            <div class="form-group has-label">
              <label for="" class="control-label">
                  Name: <span class="star">*</span>
              </label>
              <textarea class="form-control" placeholder="Name..." name="Description:" cols="50" rows="1"
                [(ngModel)]="actionItem.description" required></textarea>
            </div>
            <div class="form-group has-label">
              <label class="control-label" for="">Type of work:
                <span class="star">*</span>
              </label>
              <input type="text" class="form-control" name="sname" required [(ngModel)]="actionItem.name" placeholder="Type of work....">
            </div>
            <div class="form-group has-label">
              <ng-select [items]="SIunits" bindLabel="name" [ngModelOptions]="{standalone: true}" placeholder="Unit:*" [(ngModel)]="setUnit"></ng-select>
            </div>
          </div>
        </form>
        <div class="modal-footer" style="margin-bottom:0%">
          <div class="left-side">
            <button type="button" class="btn btn-default btn-link" data-dismiss="modal">Close</button>
          </div>
          <div class="divider"></div>
          <div class="right-side">
            <button type="button" class="btn btn-success btn-link" (click)="newAction(actionItem)" data-dismiss="modal"
              title="save activity">Enter</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="editAction" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="card-body ">
        <div class="card-header text-center">
          <p class="col-md-8 ml-auto mr-auto col-form-label info" style="color:steelblue">
            <font size=4>Edit Sub-task <br> "{{ selectedAction.name }}"</font>
          </p>
        </div>
        <hr>
        <form class="form-horizontal">
          <div class="row">
            <label class="col-md-4 col-form-label">Start Date</label>
            <div class="col-md-7">
              <div class="form-group">
                <input type="date" [(ngModel)]="startDate" name="startD" class="form-control">
              </div>
            </div>
          </div>
          <div class="row">
            <label class="col-md-4 col-form-label">End Date</label>
            <div class="col-md-7">
              <div class="form-group">
                <input type="date" [(ngModel)]="endDate" name="endD" class="form-control">
              </div>
            </div>
          </div>
        </form>

        <div class="modal-footer" style="margin-bottom:0%">
          <div class="left-side">
            <button type="button" class="btn btn-default btn-link" data-dismiss="modal">Close</button>
          </div>
          <div class="divider"></div>
          <div class="right-side">
            <button type="button" class="btn btn-success btn-link" (click)="editAction(startDate,endDate)" data-dismiss="modal"
              title="save activity">Enter</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="editClassActionItem" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="card-body ">
        <div class="card-header text-center">
          <p class="col-md-8 ml-auto mr-auto col-form-label clrs-h1-font info" style="color:steelblue">
            <!-- <font size=4>Edit New Sub-task item <br> "{{ selectedClassAction.name }}"</font> -->
            Edit New Sub-task item <br> "{{ selectedClassAction.name }}"
          </p>
        </div>
        <hr>
        <form class="form-horizontal">
          <div class="row">
            <label class="col-md-4 col-form-label">Start Date</label>
            <div class="col-md-7">
              <div class="form-group">
                <input type="date" [(ngModel)]="startDate" name="start" class="form-control">
              </div>
            </div>
          </div>
          <div class="row">
            <label class="col-md-4 col-form-label">End Date</label>
            <div class="col-md-7">
              <div class="form-group">
                <input type="date" [(ngModel)]="endDate" name="end" class="form-control">
              </div>
            </div>
          </div>
        </form>

        <div class="modal-footer" style="margin-bottom:0%">
          <div class="left-side">
            <button type="button" class="btn btn-default btn-link" data-dismiss="modal">Close</button>
          </div>
          <div class="divider"></div>
          <div class="right-side">
            <button type="button" class="btn btn-success btn-link" (click)="editClassAction(startDate,endDate)"
              data-dismiss="modal" title="save activity">Enter</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- 00000000000000000000000000000000000000000  old Stuff  00000000000000000000000000000000000000000 -->
<div class="modal fade" id="actionClosure" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-notice">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
          <i class="nc-icon nc-simple-remove"></i>
        </button>
        <h5 class="modal-title" id="myModalLabel">{{ actionSet.name }}</h5>
      </div>
      <div class="modal-body">
        <div class="instruction">
          <div class="row">
            <div class="col-md-10 text-center">
              <strong>Are you sure you have completed full quantites of this activity</strong>
              <!-- <p class="description">The first step is to create an account at
                <a href="https://www.creative-tim.com/">Creative Tim</a>. You can choose a social network or go for the
                classic version, whatever works best for you.</p> -->
            </div>
          </div>
          <br>
          <p>If you have completed, Click Confirm to complete</p>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-info btn-round" (click)="setComplete()"
            data-dismiss="modal">Confirm</button>
        </div>
      </div>
    </div>
  </div>  
</div>
<div class="modal fade" id="actionEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-notice" style="margin-top: 0px; max-height: 750px">
    <div class="modal-content" style="margin-top: -30px;">
      <div class="modal-body" style="max-height: 750px">
        <div class="row">
          <div class="col-md-12">
            <h4 class="clrs-h1-font" style="margin-top: 0px;"><span style="border-bottom-style: ridge;">&nbsp;Edit Subtask&nbsp;</span></h4>
            <div class="card-body text-left scroll-modalSub">
              <div class="form-group has-label">
                <label class="control-label" for="">Name:
                  <span class="star">*</span>
                </label>
                <input type="text" class="form-control" name="sname" required [(ngModel)]="setSub.name">
              </div>
              <div class="form-group has-label">
                <label for="" class="control-label">Task:
                  <span class="star category">*
                    <span *ngIf="!sameEntprise"> Task Does not belong to this Enterprise
                        <span *ngIf="!setSub.companyName">{{ setSub.companyName }}</span>
                    </span>
                    <span class="col-md-3 pull-right text-right" >
                      <a class="text-primary" (click)="resetEditSub()" style="cursor: pointer;"><font size= 2>Revert</font></a>
                    </span>
                  </span>
                </label>
                <ng-container  *ngIf="!setSub.taskName || !setSub.taskId">
                  <ng-select [items]="weeklyTasks3 | async" bindLabel="name" id="subTaskTask" name="sstask" placeholder="Select task"
                  (change)="taskSelect(edtSubSelectedTask)"[(ngModel)]="edtSubSelectedTask"></ng-select><!--  [(ngModel)]="edtSubSelectedTask" -->
                </ng-container>
                <input *ngIf="setSub.taskName" disabled type="text" class="form-control" name="Task:" [(ngModel)]="setSub.taskName" required>
              </div>
              <ng-container  *ngIf="setSub.classification.name === 'Work'; else NotWorkClass">
                <ng-container *ngIf="!edtSubSelectedTask">
                  <div class="form-group has-label">
                    <label for="" class="control-label">Company:
                      <span class="star">*</span>
                    </label>
                    <ng-select *ngIf="!setSub.companyName" [items]="enterprises | async" bindLabel="name" placeholder="Select enterprise" [(ngModel)]="setEnterprise" (change)="setEnt(setEnterprise)"></ng-select>
                    <input *ngIf="setSub.companyName" type="text" disabled class="form-control" name="Company:" [(ngModel)]="setSub.companyName" required>
                  </div>
                  <div class="form-group has-label">
                    <label for="" class="control-label">Project:
                      <span class="star">*</span>
                    </label>
                    <ng-select *ngIf="!setSub.projectName" [items]="projects | async" bindLabel="name" placeholder="Select project" [(ngModel)]="setProject" (change)="setProj(setProject)"></ng-select>
                    <input *ngIf="setSub.projectName" type="text" disabled class="form-control" name="Project3" [(ngModel)]="setSub.projectName" required>
                  </div>
                </ng-container>
                <ng-container *ngIf="edtSubSelectedTask">
                  <ng-container *ngIf="!setSub.companyName; else elseTemplate1">
                    <div class="form-group has-label">
                      <label for="" class="control-label">Company:
                        <span class="star category">*</span>
                      </label>
                      <ng-select *ngIf="!edtSubSelectedTask.companyName" [items]="enterprises | async" bindLabel="name" placeholder="Select enterprise" [(ngModel)]="setEnterprise" (change)="setEnt(setEnterprise)"></ng-select>
                      <input *ngIf="edtSubSelectedTask.companyName" disabled type="text" class="form-control" name="Company2" [(ngModel)]="edtSubSelectedTask.companyName" required>
                    </div>
                  </ng-container>
                  <ng-template #elseTemplate1>
                    <div class="form-group has-label">
                      <label for="" class="control-label">Company:
                        <span class="star">*</span>
                      </label>
                      <ng-select *ngIf="!setSub.companyName" [items]="enterprises | async" bindLabel="name" placeholder="Select enterprise" [(ngModel)]="setEnterprise" (change)="setEnt(setEnterprise)"></ng-select>
                      <input *ngIf="setSub.companyName" type="text" disabled class="form-control" name="Company3" [(ngModel)]="setSub.companyName" required>
                    </div>
                  </ng-template>
                  <ng-container *ngIf="!setSub.projectName; else elseTemplate2">
                    <div class="form-group has-label">
                      <label for="" class="control-label">Project:
                        <span class="star">*</span>
                      </label>
                      <ng-select *ngIf="!edtSubSelectedTask.projectName" [items]="projects | async" bindLabel="name" placeholder="Select project" [(ngModel)]="setProject" (change)="setProj(setProject)"></ng-select>
                      <input *ngIf="edtSubSelectedTask.projectName" disabled type="text" class="form-control" name="Project1" [(ngModel)]="edtSubSelectedTask.projectName" required>
                    </div>
                  </ng-container>
                  <ng-template #elseTemplate2>
                    <div class="form-group has-label">
                      <label for="" class="control-label">Project:
                        <span class="star">*</span>
                      </label>
                      <ng-select *ngIf="!setSub.projectName" [items]="projects | async" bindLabel="name" placeholder="Select project" [(ngModel)]="setProject" (change)="setProj(setProject)"></ng-select>
                      <input *ngIf="setSub.projectName" type="text" disabled class="form-control" name="Project2" [(ngModel)]="setSub.projectName" required>
                    </div>
                  </ng-template>
                </ng-container>
              </ng-container>
              <ng-template #NotWorkClass>
                <div class="form-group has-label">
                  <label for="" class="control-label">Classification:
                    <span class="star">*</span>
                  </label>
                  <ng-select *ngIf="!setSub.classification" [items]="classifications | async" bindLabel="name" placeholder="Select enterprise" [(ngModel)]="setSub.classification"></ng-select><!-- classification -->
                  <input *ngIf="setSub.classification" type="text" disabled class="form-control" name="Company:" [(ngModel)]="setSub.classification.name" required>
                </div>
              </ng-template>
              <div class="form-group has-label">
                <label for="" class="control-label">Unit:
                  <span class="star">*</span>
                </label>
                <ng-select [items]="SIunits" bindLabel="name" placeholder="{{ setSub.unit }}" [ngModelOptions]="{standalone: true}" [(ngModel)]="setUnit"></ng-select>
              </div>
              <div class="form-group has-label">
                <label for="" class="control-label">Description:
                  <span class="star">*</span>
                  <textarea class="form-control" placeholder="Type Description" name="Description:" cols="50" rows="auto" [(ngModel)]="setSub.description"  required></textarea>
                </label>
              </div>
              <div class="form-group has-label">
                <label for="" class="control-label">
                  <span class="row">
                    <span class="col-md-9">Start Date: <span class="star">*</span></span>
                    <span class="col-md-3 pull-right text-right" >
                      <a class="text-primary" (click)="startdateTogle()"  style="cursor: pointer;"><font size= 2>Change</font></a>
                    </span>
                  </span>
                </label>
                <ng-container *ngIf="!showsCal">
                  <input type="date" class="form-control" name="ssDate:" [(ngModel)]="startDate">
                </ng-container>
                <ng-container *ngIf="showsCal">
                    <input disabled type="text" class="form-control" name="Task:" [(ngModel)]="setSub.startDate" required>
                </ng-container>
              </div>
              <div class="form-group has-label">
                <label for="" class="control-label">
                  <span class="row">
                    <span class="col-md-9">Finish Date: <span class="star">*</span></span>
                    <span class="col-md-3 pull-right text-right" >
                      <a class="text-primary" (click)="enddateTogle()" style="cursor: pointer;"><font size= 2>Change</font></a>
                    </span>
                  </span>
                </label>
                <ng-container *ngIf="!showfCal">
                    <input type="date" class="form-control" name="sfDate:" [(ngModel)]="endDate">
                </ng-container>
                <ng-container *ngIf="showfCal">
                  <input disabled type="text" class="form-control" name="Task:" [(ngModel)]="setSub.endDate" required>
                </ng-container>
              </div>
              <div class="category"> <span class="star">*</span>You are required to fill all fields</div>
            </div>
          </div>
        </div>
        <div class="modal-footer justify-content-center" style="border-top-style: ridge;">
          <button type="button" class="btn btn-info btn-round btn-sm" (click)="initDiary()" data-dismiss="modal"><b>Cancel</b></button>
          <button type="button" class="btn btn-info btn-round btn-sm" (click)="resetEditSub()"><b>Revert</b></button>
          <button type="button" class="btn btn-info btn-round btn-sm" (click)="setEditedSub(startDate,endDate)" data-dismiss="modal"><b>Save</b></button>
        </div>
      </div>
    </div>
  </div>
</div>